<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¬è§£ã</title>
    <style>
        /* CSSã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«è¨˜è¿° */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    background-color: #e3e3e3;
    flex-direction: column;
    text-align: center;
    overflow-x: hidden;
    overflow-y: scroll;
}
#game-container {
    text-align: center;
    background-color: #fff;
    padding: 40px;
    border-radius: 15px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    width: 350px;
    box-sizing: border-box;
    margin-top: 20px;
    position: relative;
    z-index: ;
    display: none;
}
#menu-container {
    display: none;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 20px;
    max-width: 400px;
}
#menu-container button {
    padding: 8px 12px;
    font-size: 14px;
    cursor: pointer;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    transition: background-color 0.3s ease;
    width: 80px;
    margin-top: 12px;
}
#menu-container button:hover {
    background-color: #45a049;
}
#give-up-btn {
    position: absolute;
    top: 27px;
    right: 10px;
    padding: 5px 10px;
    font-size: 16px;
    font-weight: bold;
    background-color: red;
    color: white;
    border: none;
    border-radius: 4px;
    width: 40px;
    cursor: pointer;
}
#give-up-btn:hover {
    background-color: salmon;
}
input[type="text"] {
    padding: 12px;
    position: relative;
    margin-top: 15px;
    width: 250px;
    font-size: 16px;
    border-radius: 5px;
    solid: #808080;
    z-index: 1;
}
#give-up-confirmation {
    display: none;
    background-color: #fff;
    padding: 10px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    z-index: 5;
}
#give-up-confirmation button {
    padding: 5px 10px;
    font-size: 16px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    margin: 10px;
}
#yes-btn {
    background-color: #f44336;
    color: white;
    font-weight: bold;
}
#yes-btn:hover {
    background-color: #d32f2f;
}
#no-btn {
    background-color: #4CAF50;
    color: white;
}
#no-btn:hover {
    background-color: #45a049;
}
button {
    padding: 12px 18px;
    margin-top: 13px;
    font-size: 16px;
    cursor: pointer;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    width: 250px;
    position: relative;
    z-index: ;
}
button:hover {
    background-color: #45a049;
}
#message {
    margin-top: 20px;
    font-size: 18px;
    color: #ff0000;
}
h1 {
    font-size: 24px;
    margin-bottom: 20px;
    margin-top: 20px;
}
#score {
    font-size: 20px;
    margin-top: 10px;
    font-weight: bold;
    color: #4CAF50;
}
#clear-screen {
    display: none;
    text-align: center;
    background-color: #fff;
    padding: 40px;
    border-radius: 15px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    width: 400px;
}
#clear-screen h2 {
    color: #4CAF50;
    font-size: 30px;
}
#clear-screen button {
    background-color: #4CAF50;
    color: white;
    padding: 12px 18px;
    font-size: 16px;
    border: none;
    border-radius: 5px;
    width: 250px;
    margin-top: 20px;
    cursor: pointer;
    z-index: ;
}
#clear-screen button:hover {
    background-color: #45a049;
}
.correct-answer {
    font-size: 100px;
    color: red;
    margin-top: 20px;
    position: absolute;
    z-index: 6;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
.hidden {
    display: none;
}
.answered {
    background-color: #4CAF50;
}
#explanation-screen {
    text-align: center;
    background-color: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    width: 80%;
    margin: 20px auto;
    display: none; /* åˆæœŸçŠ¶æ…‹ã§ã¯éè¡¨ç¤º */
}
#explanation-screen h2 {
    font-size: 24px;
    margin-bottom: 20px;
}
#explanation-content {
    margin-top: 20px;
    font-size: 16px;
}
button {
    padding: 8px 12px;
    font-size: 14px;
    margin-top: 20px;
    cursor: pointer;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    z-index: 2;
}
button:hover {
    background-color: #45a049;
}
#container {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: visible;
}
.hiragana {
    position: absolute;
    font-family: 'Noto Sans JP', sans-serif;
    color: black;
    width: 100%;
    height: 500px;
    transform-origin: center;
    z-index: 0;
}
img {
    position: relative; 
    z-index: 4; 
    transition: transform 0.3s ease; /* å›è»¢ã‚’ã‚¹ãƒ ãƒ¼ã‚ºã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
}
img:hover {
    transform: rotate(90deg) scale(1.9); 
}
#start-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8); /* é»’ã®åŠé€æ˜ */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    z-index: 1000;
}
#start-screen h1 {
    font-size: 3rem;
    color: white;
    margin-bottom: 20px;
}
#start-button {
    font-size: 2rem;
    padding: 10px 30px;
    cursor: pointer;
    border: none;
    background-color: #ffcc00;
    color: black;
    border-radius: 10px;
}
        /* ã‚²ãƒ¼ãƒ ç”»é¢ã‚’æœ€åˆã¯éš ã™ */
#game-screen {
    display: none;
}
        /* ã‚¿ã‚¤ãƒãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
#timer {
    position: absolute;
    top: 10px;
    left: 10px;
    font-size: 1.5rem;
    color: black;
}
    </style>
</head>
<body>
    <div id="start-screen">
    <h1>è¬è§£ãã‚’é–‹å§‹ã—ã¾ã™</h1>
    <button id="start-button" onclick="startGame()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>

</div>
<div id="game-container">
    <button id="menu-toggle" onclick="toggleMenu()">å•é¡Œé¸æŠ</button>
    <!-- ã‚®ãƒ–ã‚¢ãƒƒãƒ—ç¢ºèªãƒœã‚¿ãƒ³ï¼ˆéè¡¨ç¤ºï¼‰ -->
    <button id="give-up-btn" onclick="giveUp()">ğŸ³</button>
    <div id="give-up-confirmation">
        <p>æœ¬å½“ã«ã‚®ãƒ–ã‚¢ãƒƒãƒ—ã—ã¾ã™ã‹ï¼Ÿ</p>
        <button id="yes-btn" onclick="confirmGiveUp()">ğŸ³ã¯ã„</button>
        <button id="no-btn" onclick="cancelGiveUp()">ã„ã„ãˆ</button>
    </div>
    <div id="menu-container">
        <!-- ãƒœã‚¿ãƒ³ã¯å‹•çš„ã«ç”Ÿæˆã•ã‚Œã¾ã™ -->
    </div>

<div id="game-screen" style="display:none;">
    <div id="timer">00:00</div>
    <!-- ä»–ã®ã‚²ãƒ¼ãƒ è¦ç´  -->
</div>
    <h1>è¬è§£ã</h1>
    <div id="progress"></div>
    <div id="puzzle-container">
        <!-- å•é¡Œã®é¡Œåã‚’è¡¨ç¤ºã™ã‚‹å ´æ‰€ -->
        <div id="puzzle-title" style="font-size: 20px; font-weight: bold; margin-bottom: 10px;"></div>
        <!-- å•é¡Œæ–‡ã‚’è¡¨ç¤ºã™ã‚‹å ´æ‰€ -->
        <div id="puzzle-text"></div>
        <p id="puzzle-text"></p>
        <input type="text" id="answer-input" placeholder="ã“ã“ã«ç­”ãˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
        <button id="answer-button" onclick="checkAnswer()">è§£ç­”ã™ã‚‹</button>
        <button id="next-btn" onclick="nextPuzzle()" style="display: none;">æ¬¡ã®å•é¡Œ</button>
        <button id="hint-btn" style="display: none;" onclick="showHint()">ãƒ’ãƒ³ãƒˆ</button>
    </div>
    <p id="message"></p>
</div>

<div id="clear-screen">
    <h2 id="clear-message">ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ï¼<pre>ãŠã‚ã§ã¨ã†ï¼</h2>
    <button id="retry-button" onclick="resetGame()">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹</button>
</div>

<!-- ã²ã‚‰ãŒãªã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®div -->
<div id="hiragana-container"></div>

<!-- è§£èª¬ç”»é¢ -->
<div id="explanation-container" style="display: none;">
    <!-- è§£èª¬å†…å®¹ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
</div>

<script>
let currentPuzzle = 1;
let solvedPuzzles = 0; // è§£ã„ãŸå•é¡Œæ•°
let reachedPuzzle9 = false; // å•9ã«é€²ã‚“ã ã‹ã©ã†ã‹
const puzzles = [
    { title: "å•é¡Œ1",question: "èµ¤ã¤ãªã„ã§èª­ã‚‚ã†", correctAnswer: "1", hint: "ãƒ’ãƒ³ãƒˆ1", image: "7.png" },
    { title: "å•é¡ŒäºŒ",question: "è¬ã‚’è§£ã‘", correctAnswer: "2", hint: "ãƒ’ãƒ³ãƒˆ2", image: "ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2024-06-12 185222.png" },
    { title: "å•é¡Œ3",question: "â¡ã‚’ã¤ãªã’", correctAnswer: "3", hint: "ãƒ’ãƒ³ãƒˆ3", image: "3-1.png" },
    { title: "å•é¡Œ4",question: "ã»ã—ã‚’ä½œã£ã¦â–³ã‚’èª­ã‚‚ã†", correctAnswer: "4", hint: "ãƒ’ãƒ³ãƒˆ4", image: "" },
    { title: "å•é¡Œ5",question: "å•é¡Œã‹ã‚‰ä»²é–“å¤–ã‚Œã‚’è¦‹ã¤ã‘å‡ºã—ã€ã“ã®è¬ã®æŒ‡ç¤ºã«å¾“ãŠã†", correctAnswer: "5", hint: "ãƒ’ãƒ³ãƒˆ5", image: "" },
    { title: "å•é¡Œ6",question: "å•é¡Œ6", correctAnswer: "6", hint: "ãƒ’ãƒ³ãƒˆ6", image: "" },
    { title: "å•é¡Œ7",question: "none", correctAnswer: "7", hint: "ãƒ’ãƒ³ãƒˆ7", image: "7.png" },
    { title: "å•é¡Œ8",question: "ã€Œã¯ã€ã‹ã‚‰ã€ç°è‰²ã®ã²ã‚‰ãŒãªã®ä¸Šå‘ãã‚’ã¤ãªã’ã¦æŒ‡ç¤ºã«å¾“ãŠã†", correctAnswer: "8", hint: "ã¯ãŸã®ã†ãˆã‚’ã‚ˆã‚", image: "ra1.jpg" },
    { title: "å•é¡Œ9",question: "å•é¡Œ9", correctAnswer: "9", hint: "ãƒ’ãƒ³ãƒˆ9", image: "" } // 9å•ç›®
];

let answers = {}; // å„å•é¡Œã«å¯¾ã™ã‚‹å›ç­”ã‚’è¨˜éŒ²
let hintsDisplayed = {}; // ãƒ’ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚ŒãŸã‹ã©ã†ã‹ã‚’è¨˜éŒ²
let hintCount = 0; // ãƒ’ãƒ³ãƒˆè¡¨ç¤ºå›æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
let startTime;
let timerInterval;

// å•é¡Œé¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
function toggleMenu() {
    const menuContainer = document.getElementById('menu-container');
    const isMenuVisible = menuContainer.style.display === 'flex';
    
    // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è¡¨ç¤ºãƒ»éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆ
    menuContainer.style.display = isMenuVisible ? 'none' : 'flex';
}

    //ã‚¹ã‚¿ãƒ¼ãƒˆé–¢æ•°
document.addEventListener("DOMContentLoaded", function() {
    // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã®å‡¦ç†ã‚’é–¢æ•°ã«ã¾ã¨ã‚ã‚‹
    function startGame() {
        document.getElementById("start-screen").style.display = "none";
        document.getElementById("game-screen").style.display = "block";
        document.getElementById("game-container").style.display = "block";

        startTime = Date.now();
        timerInterval = setInterval(updateTimer, 1000);
    }

    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«é–¢æ•°ã‚’å…¬é–‹
    window.startGame = startGame;
});


function updateTimer() {
    const elapsedTime = Math.floor((Date.now() - startTime) / 1000);
    const minutes = String(Math.floor(elapsedTime / 60)).padStart(2, "0");
    const seconds = String(elapsedTime % 60).padStart(2, "0");
    document.getElementById("timer").textContent = `${minutes}:${seconds}`;
}

// ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢æ™‚ã«æ™‚é–“ã‚’è¡¨ç¤º
function gameClear() {
    clearInterval(timerInterval);
    const finalTime = document.getElementById("timer").textContent;
    alert(`ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆã‚¯ãƒªã‚¢ï¼ã‹ã‹ã£ãŸæ™‚é–“: ${finalTime}`);
}

// å•é¡Œã®è¡¨ç¤º
function displayPuzzle() {
    // ãƒ’ãƒ³ãƒˆã‚’æ¶ˆã™
    document.getElementById('message').textContent = '';

    const puzzle = puzzles[currentPuzzle - 1];
    // é¡Œåã‚’è¡¨ç¤º
    document.getElementById('puzzle-title').textContent = puzzle.title;
    // å•é¡Œ3ã®ãƒ†ã‚­ã‚¹ãƒˆã«æ”¹è¡Œã‚’è¿½åŠ 
    if (currentPuzzle === 3) {
       const rotatedText = document.createElement('div');
        rotatedText.innerHTML = "â†“<br>ã‚’<br>ã¤<br>ãª<br>ã’";  // <br> ã‚¿ã‚°ã‚’ä½¿ã£ã¦æ”¹è¡Œ
     rotatedText.style.transform = 'rotate(90deg)';
       rotatedText.style.transformOrigin = 'center';
      rotatedText.style.margin = '20px auto';
      rotatedText.style.display = 'inline-block';
     document.getElementById('puzzle-text').innerHTML = '';
      document.getElementById('puzzle-text').appendChild(rotatedText);
    } else {
    document.getElementById('puzzle-text').textContent = puzzle.question;
}
    // ç”»åƒãŒå­˜åœ¨ã™ã‚‹å ´åˆã€ç”»åƒã‚’è¡¨ç¤º
    if (puzzle.image) {
        const imgElement = document.createElement('img');
        imgElement.src = puzzle.image;
        imgElement.alt = "å•é¡Œã®ç”»åƒ";
        imgElement.style.width = '100%';
        imgElement.style.cursor = 'pointer';

        document.getElementById('puzzle-text').appendChild(imgElement);
    }

    // è§£ç­”æ¬„ã®åˆæœŸåŒ–
    document.getElementById('answer-input').value = '';
    document.getElementById('message').textContent = '';
    document.getElementById('next-btn').style.display = 'none'; // ã€Œæ¬¡ã®å•é¡Œã€ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º

    // è§£ç­”ãŒã™ã§ã«ã‚ã‚‹å ´åˆã€è§£ç­”ãƒœãƒƒã‚¯ã‚¹ã‚’ç„¡åŠ¹åŒ–
    if (answers[currentPuzzle]) {
        document.getElementById('answer-input').disabled = true;
        document.getElementById('answer-input').value = answers[currentPuzzle];
        document.getElementById('answer-button').style.display = 'none'; // è§£ç­”ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
        document.getElementById('hint-btn').style.display = 'none'; // ãƒ’ãƒ³ãƒˆãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
    } else {
        document.getElementById('answer-input').disabled = false;
        document.getElementById('answer-button').style.display = 'inline-block'; // è§£ç­”ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
        document.getElementById('hint-btn').style.display = 'inline-block'; // ãƒ’ãƒ³ãƒˆãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
    }

    updateButtons();
}


// ãƒ’ãƒ³ãƒˆã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
function showHint() {
    const puzzle = puzzles[currentPuzzle - 1];

    // ã™ã§ã«3å›ãƒ’ãƒ³ãƒˆã‚’è¡¨ç¤ºã—ãŸå ´åˆã¯è¡¨ç¤ºã—ãªã„
    if (hintCount >= 3) {
        document.getElementById('message').textContent = "ãƒ’ãƒ³ãƒˆã¯3å›ã¾ã§ã§ã™ã€‚";
        return;
    }

    // åŒã˜å•é¡Œã®ãƒ’ãƒ³ãƒˆãŒã™ã§ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹å ´åˆã¯æ–°ãŸã«è¡¨ç¤ºã—ãªã„
    if (hintsDisplayed[currentPuzzle]) {
        return;
    }

    // ç¾åœ¨è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ãƒ’ãƒ³ãƒˆã‚’æ¶ˆå»ï¼ˆåŒæ™‚ã«è¤‡æ•°ã®ãƒ’ãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹ï¼‰
    document.getElementById('message').textContent = ''; 

    const hintMessage = document.createElement('div');
    hintMessage.textContent = `ãƒ’ãƒ³ãƒˆ: ${puzzle.hint}`;
    hintMessage.style.fontSize = '16px';
    hintMessage.style.marginTop = '10px';
    hintMessage.style.color = '#FF6347'; // ãƒ’ãƒ³ãƒˆã¯ã‚ªãƒ¬ãƒ³ã‚¸è‰²ã§è¡¨ç¤º
    document.getElementById('message').appendChild(hintMessage);

    // ãƒ’ãƒ³ãƒˆå›æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
    hintCount++;

    // ãƒ’ãƒ³ãƒˆè¡¨ç¤ºã®çŠ¶æ…‹ã‚’è¨˜éŒ²
    hintsDisplayed[currentPuzzle] = true; 
}

// ã‚®ãƒ–ã‚¢ãƒƒãƒ—ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã¨ãã®å‡¦ç†
function giveUp() {
    // ã‚®ãƒ–ã‚¢ãƒƒãƒ—ç¢ºèªç”»é¢ã‚’è¡¨ç¤º
    document.getElementById('give-up-confirmation').style.display = 'block';
}

// ã‚®ãƒ–ã‚¢ãƒƒãƒ—ç¢ºèªã§ã€Œã¯ã„ã€ã‚’æŠ¼ã—ãŸã¨ãã®å‡¦ç†
function confirmGiveUp() {
    // ã‚®ãƒ–ã‚¢ãƒƒãƒ—ç¢ºèªç”»é¢ã‚’éè¡¨ç¤º
    document.getElementById('give-up-confirmation').style.display = 'none';
        // ã‚®ãƒ–ã‚¢ãƒƒãƒ—æ™‚ã«ã²ã‚‰ãŒãªã‚’éè¡¨ç¤ºã«ã™ã‚‹
    document.getElementById('hiragana-container').style.display = 'none';

    // ã‚²ãƒ¼ãƒ ã®å•é¡Œã‚’ãƒªã‚»ãƒƒãƒˆ
    showExplanationScreen();
}

// ã‚®ãƒ–ã‚¢ãƒƒãƒ—ç¢ºèªã§ã€Œã„ã„ãˆã€ã‚’æŠ¼ã—ãŸã¨ãã®å‡¦ç†
function cancelGiveUp() {
    // ã‚®ãƒ–ã‚¢ãƒƒãƒ—ç¢ºèªç”»é¢ã‚’éè¡¨ç¤º
    document.getElementById('give-up-confirmation').style.display = 'none';
}

// è§£èª¬ç”»é¢ã®è¡¨ç¤º
function showExplanationScreen() {
    document.getElementById('game-container').style.display = 'none'; // ã‚²ãƒ¼ãƒ ç”»é¢ã‚’éè¡¨ç¤º
    document.getElementById('clear-screen').style.display = 'none'; // ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ç”»é¢ã‚’éè¡¨ç¤º

    const explanationContainer = document.getElementById('explanation-container');
    explanationContainer.style.display = 'block'; // è§£èª¬ç”»é¢ã‚’è¡¨ç¤º

    const explanations = [
        "ãƒ©ãƒ¼ãƒ¡ãƒ³",
        "å•é¡Œ2ã®è§£èª¬",
        "å•é¡Œ3ã®è§£èª¬",
        "å•é¡Œ4ã®è§£èª¬",
        "å•é¡Œ5ã®è§£èª¬",
        "å•é¡Œ6ã®è§£èª¬",
        "å•é¡Œ7ã®è§£èª¬",
        "å•é¡Œ8ã®è§£èª¬",
        "å•é¡Œ9ã®è§£èª¬"
    ];

    let explanationText = '';
    for (let i = 0; i < explanations.length; i++) {
        explanationText += `<p>å•é¡Œ ${i + 1}: ${explanations[i]}</p>`;
    }

    explanationContainer.innerHTML = explanationText;
}
// é…ç½®ã™ã‚‹ã²ã‚‰ãŒãªã®ãƒ‡ãƒ¼ã‚¿
const hiraganaData = [
    { text: 'ã¯', top: 130, left: -357, fontSize: '20px', rotate: 90 },
    { text: 'ã„', top: 150, left: -3, fontSize: '30px', rotate: 45 }, // 45åº¦å›è»¢
    { text: 'A', top: 351, left: 81, fontSize: '30px', rotate: 270 }, // -30åº¦å›è»¢
    { text: 'ãˆ', top: -230, left: -50, fontSize: '30px', rotate: 200 }, // 90åº¦å›è»¢
    { text: 'ãŠ', top: 90, left: -200, fontSize: '25px', rotate: 13 }, // 135åº¦å›è»¢
    { text: 'ãŸ', top: -90, left: 158, fontSize: '25px', rotate: 180 },
    { text: 'ã†', top: 880, left: -50, fontSize: '30px', rotate: 0 }, // 180åº¦å›è»¢
    { text: 'ã‚ˆ', top: -188, left: -287, fontSize: '35px', rotate: 87 }, // -60åº¦å›è»¢
    { text: 'ã‚', top: 0, left: 40, fontSize: '30px', rotate: 30 }, // 30åº¦å›è»¢
    { text: 'ã®', top: 365, left: 340, fontSize: '24px', rotate: 230 }, // -90åº¦å›è»¢
    { text: 'ã•', top: 290, left: 68, fontSize: '25px', rotate: 280 },
    { text: 'ï¼Ÿ', top: 200, left: 100, fontSize: '25px', rotate: -13},
    { text: 'M', top: 200, left: 100, fontSize: '28px', rotate: 23},
    { text: 'é­‘', top: 250, left: 150, fontSize: '29px', rotate:335},
    { text: 'ã¸', top: -90, left: -320, fontSize: '26px', rotate: 135},
    { text: 'ï¼', top:200, left: 40, fontSize: '30px', rotate: 23},
    { text: 'D', top: 300, left: 30, fontSize: '20px', rotate: 345}
];

// ã²ã‚‰ãŒãªã‚’æŒ‡å®šã•ã‚ŒãŸä½ç½®ã¨ã‚µã‚¤ã‚ºã§ãƒšãƒ¼ã‚¸ã«è¡¨ç¤º
function displayHiragana() {
    const container = document.getElementById('hiragana-container');

    hiraganaData.forEach(item => {
        const hiraganaElement = document.createElement('div');
        hiraganaElement.textContent = item.text;
        hiraganaElement.classList.add('hiragana');
        hiraganaElement.style.top = `${item.top}px`;
        hiraganaElement.style.left = `${item.left}px`;
        hiraganaElement.style.fontSize = item.fontSize;
        hiraganaElement.style.transform = `rotate(${item.rotate}deg)`; // å›è»¢ã‚’é©ç”¨

        container.appendChild(hiraganaElement);
    });
}

// ãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚ŒãŸå¾Œã«ã²ã‚‰ãŒãªã‚’è¡¨ç¤º
window.onload = displayHiragana;



// è§£ç­”ã®ç¢ºèªå‡¦ç†
function checkAnswer() {
    const userAnswer = document.getElementById('answer-input').value.trim();
    const puzzle = puzzles[currentPuzzle - 1];

    // æ—¢ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã€‡ã‚’å‰Šé™¤ã™ã‚‹
    const existingCorrectSymbol = document.querySelector('.correct-answer');
    if (existingCorrectSymbol) {
        existingCorrectSymbol.remove();
    }

    if (userAnswer === puzzle.correctAnswer) {
        // æ­£è§£ã—ãŸå ´åˆã€ãã®éƒ¨å±‹ï¼ˆå•é¡Œï¼‰ã§ç­”ãˆã‚’è¨˜éŒ²
        answers[currentPuzzle] = userAnswer;

        // ã€‡ã‚’è¡¨ç¤º
        const correctSymbol = document.createElement('div');
        correctSymbol.classList.add('correct-answer');
        correctSymbol.textContent = "ã€‡";
        document.getElementById('game-container').appendChild(correctSymbol);

        // 2ç§’å¾Œã«ã€‡ã‚’æ¶ˆã™
        setTimeout(() => {
            correctSymbol.classList.add('hidden');
        }, 1500);

        solvedPuzzles++; // è§£ã„ãŸå•é¡Œæ•°ã‚’å¢—åŠ 
        updateButtons();

        // æ¬¡ã®å•é¡Œã«é€²ã‚€ãŸã‚ã®ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
        if (currentPuzzle < puzzles.length) {
            document.getElementById('next-btn').style.display = 'block';
        }
      // ãƒ’ãƒ³ãƒˆãƒœã‚¿ãƒ³ã¨è§£ç­”ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
        document.getElementById('hint-btn').style.display = 'none';
        document.getElementById('answer-button').style.display = 'none';

        // ã‚²ãƒ¼ãƒ ã®ã‚¯ãƒªã‚¢åˆ¤å®š
        if (!reachedPuzzle9 && solvedPuzzles === 8) {
            showNormalClearScreen(); // ãƒãƒ¼ãƒãƒ«ã‚¯ãƒªã‚¢
        }

        // ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆã‚¯ãƒªã‚¢åˆ¤å®š
        if (reachedPuzzle9 && solvedPuzzles === 9) {
            showPerfectClearScreen(); // ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆã‚¯ãƒªã‚¢
        }

        // è§£ç­”ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹
        document.getElementById('answer-button').style.display = 'none';
    } else {
        document.getElementById('message').textContent = "ç­”ãˆãŒé•ã„ã¾ã™ã€‚ã‚‚ã†ä¸€åº¦è©¦ã—ã¦ãã ã•ã„ã€‚";
        setTimeout(() => {
            document.getElementById('message').textContent = '';
        }, 3000); // 3ç§’å¾Œã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¶ˆã™
    }
}

    // æ¬¡ã®å•é¡Œã«é€²ã‚€å‡¦ç†
    function nextPuzzle() {
        if (currentPuzzle === 8) {
            // å•8ã®æ¬¡ã§å•9ã«é€²ã‚€
            currentPuzzle = 9;
        reachedPuzzle9 = true; // å•9ã«é€²ã‚“ã 
        displayPuzzle();
    } else if (currentPuzzle === 9) {
        // å•9ã‚’è§£ã„ãŸå¾Œã«ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆã‚¯ãƒªã‚¢ã‚’è¡¨ç¤º
        showPerfectClearScreen();
    } else {
        currentPuzzle++;
        displayPuzzle();
    }
}

// ãƒãƒ¼ãƒãƒ«ã‚¯ãƒªã‚¢ç”»é¢ã‚’è¡¨ç¤º
function showNormalClearScreen() {
    document.getElementById('clear-message').textContent = "ãƒãƒ¼ãƒãƒ«ã‚¯ãƒªã‚¢ï¼";
    document.getElementById('game-container').style.display = 'none';
    document.getElementById('clear-screen').style.display = 'block';
    document.getElementById('retry-button').style.display = 'inline-block'; // ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
}

// ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆã‚¯ãƒªã‚¢ç”»é¢ã‚’è¡¨ç¤º
function showPerfectClearScreen() {
    clearInterval(timerInterval); // ã‚¿ã‚¤ãƒãƒ¼åœæ­¢
    const finalTime = document.getElementById("timer").textContent; // æœ€çµ‚ã‚¿ã‚¤ãƒ å–å¾—
    document.getElementById('hiragana-container').style.display = 'none';
    // ã‚¯ãƒªã‚¢ç”»é¢ã‚’ä½œæˆ
    const clearScreen = document.createElement("div");
    clearScreen.id = "perfect-clear-screen";
    clearScreen.style.position = "fixed";
    clearScreen.style.top = "0";
    clearScreen.style.left = "0";
    clearScreen.style.width = "100%";
    clearScreen.style.height = "100%";
    clearScreen.style.backgroundColor = "rgba(0, 0, 0, 0.8)";
    clearScreen.style.display = "flex";
    clearScreen.style.flexDirection = "column";
    clearScreen.style.justifyContent = "center";
    clearScreen.style.alignItems = "center";
    clearScreen.style.textAlign = "center";
    clearScreen.style.zIndex = "1000";

    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
    const message = document.createElement("h1");
    message.textContent = "ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆã‚¯ãƒªã‚¢ï¼";
    message.style.color = "white";
    message.style.fontSize = "3rem";
    message.style.marginBottom = "20px";

    // ã‚¿ã‚¤ãƒ è¡¨ç¤º
    const timeDisplay = document.createElement("p");
    timeDisplay.textContent = `ã‹ã‹ã£ãŸæ™‚é–“: ${finalTime}`;
    timeDisplay.style.color = "yellow";
    timeDisplay.style.fontSize = "2rem";

    // è§£èª¬ãƒœã‚¿ãƒ³
    const explanationButton = document.createElement("button");
    explanationButton.textContent = "è§£èª¬ã‚’è¦‹ã‚‹";
    explanationButton.style.fontSize = "1.5rem";
    explanationButton.style.padding = "10px 30px";
    explanationButton.style.cursor = "pointer";
    explanationButton.style.border = "none";
    explanationButton.style.backgroundColor = "#ffcc00";
    explanationButton.style.color = "black";
    explanationButton.style.borderRadius = "10px";
    explanationButton.style.marginTop = "20px";
    explanationButton.addEventListener("click", function() {
        clearScreen.remove(); // ã‚¯ãƒªã‚¢ç”»é¢ã‚’å‰Šé™¤
        showExplanationScreen(); // è§£èª¬ç”»é¢ã«é·ç§»
    });

    // ç”»é¢ã«è¦ç´ ã‚’è¿½åŠ 
    clearScreen.appendChild(message);
    clearScreen.appendChild(timeDisplay);
    clearScreen.appendChild(explanationButton);
    document.body.appendChild(clearScreen);
}


// ã‚²ãƒ¼ãƒ ã®ãƒªã‚»ãƒƒãƒˆå‡¦ç†
function resetGame() {
    currentPuzzle = 1;
    solvedPuzzles = 0;
    answers = {};
    reachedPuzzle9 = false; // å•9ã«é€²ã‚“ã ãƒ•ãƒ©ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ
    hintsDisplayed = {}; // ãƒ’ãƒ³ãƒˆè¡¨ç¤ºã®ãƒªã‚»ãƒƒãƒˆ
    hintCount = 0; // ãƒ’ãƒ³ãƒˆå›æ•°ã®ãƒªã‚»ãƒƒãƒˆ
    document.getElementById('game-container').style.display = 'block';
    document.getElementById('clear-screen').style.display = 'none';
    displayPuzzle();
}

// ãƒœã‚¿ãƒ³ã®æ›´æ–°ï¼ˆå•é¡Œç•ªå·ãƒœã‚¿ãƒ³ï¼‰
function updateButtons() {
    const buttonContainer = document.getElementById('menu-container');
    buttonContainer.innerHTML = ''; // æ—¢å­˜ã®ãƒœã‚¿ãƒ³ã‚’ãƒªã‚»ãƒƒãƒˆ

    // å•é¡Œã®ãƒœã‚¿ãƒ³ã‚’ç”Ÿæˆ
    for (let i = 1; i <= 8; i++) { // å•9ã‚’é™¤ã„ãŸãƒœã‚¿ãƒ³ã‚’ç”Ÿæˆ
        const button = document.createElement('button');
        button.textContent = `å•é¡Œ ${i}`;
        button.onclick = () => goToPuzzle(i);
        
        // è§£ç­”ã—ãŸå•é¡Œã¯ç·‘è‰²ã«ã—ã¦ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹
        if (i <= solvedPuzzles || (i === 9 && reachedPuzzle9)) {
            button.style.backgroundColor = '#4CAF50'; // ç·‘è‰²ã«å¤‰æ›´
        }
        button.disabled = false;
        buttonContainer.appendChild(button);
    }

    // å•9ãŒè§£æ”¾ã•ã‚Œã‚‹ã¾ã§å•é¡Œé¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«è¿½åŠ ã—ãªã„
    if (reachedPuzzle9) {
        const button = document.createElement('button');
        button.textContent = `å•é¡Œ 9`;
        button.onclick = () => goToPuzzle(9);
        buttonContainer.appendChild(button);
    }
}

// æŒ‡å®šã—ãŸå•é¡Œã«ç§»å‹•ã™ã‚‹é–¢æ•°
function goToPuzzle(puzzleNumber) {
    currentPuzzle = puzzleNumber;
    displayPuzzle();
}

// ã‚²ãƒ¼ãƒ é–‹å§‹
displayPuzzle();

</script>

</body>
</html>
